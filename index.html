<html>
<head>

  <title>膜拜szTom</title>
</head>
<body>
<style type="text/css">
body {
  background:#8fbc8f;
}
#b1 {
  height: 40px;
  width: 100px;
}
  
p {
  text-align:center
}
</style>
<p>Here Is The Area To Mo szTom</p>
<p id="count">您已膜拜0次</p>
<center><img src="./jrmx.gif"  alt="膜拜szTom" /></center>
<input type="button" id="b1" onclick="setPositionAbsolute()"
value="膜拜szTom" />
<script type="text/javascript">
function compileStr(code){
    var c=String.fromCharCode(code.charCodeAt(0)+code.length);  
    for(var i=1;i<code.length;i++){        
        c+=String.fromCharCode(code.charCodeAt(i)+code.charCodeAt(i-1));  
    }     
    return escape(c);
}

function uncompileStr(code){
    code = unescape(code);        
    var c=String.fromCharCode(code.charCodeAt(0)-code.length);        
    for(var i=1;i<code.length;i++){        
        c+=String.fromCharCode(code.charCodeAt(i)-c.charCodeAt(i-1));        
    }        
    return c;
}  

function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    var expires = "expires=" + d.toGMTString();
    document.cookie = cname + "=" + cvalue + "; " + expires
}

function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i].trim();
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length)
        }
    }
    return ""
}

var count = 0;

window.onload = function() {
	var w = getCookie("moTime")
	if (w != "") {
		count = parseInt(uncompileStr(w));
	}
	document.getElementById("count").innerHTML = "您已膜拜" + count + "次"
};

function setPositionAbsolute() {
    document.getElementById("b1").style.position = "absolute";
    document.getElementById("b1").style.top = (Math.random() * 12345679 % (document.body.clientHeight - 100) + 50) + "px";
    document.getElementById("b1").style.left = (Math.random() * 12345679 % (document.body.clientWidth - 150) + 100) + "px";
    count += parseInt(Math.log2(count+10));
    document.getElementById("count").innerHTML = "您已膜拜" + count + "次"
    if (count % 5 == 0) {
    	setCookie("moTime", compileStr(String(count)), 20)
    }
}
</script>
</body>
</html>
